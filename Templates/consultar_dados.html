<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Consultar Dados</title>
</head>
<body>
    <div class="container">
        <h1>Consultar Dados</h1>
        <form method="POST">
            <label for="filtro">Filtro:</label>
            <select name="filtro" id="filtro">
                <option value="diaria">Diária</option>
                <option value="mensal">Mensal</option>
                <option value="intervalo">Intervalo Tempo</option>
            </select>
            
            <div id="intervalo" style="display: none;">
                <label for="data_inicio">Data Início:</label>
                <input type="date" name="data_inicio" id="data_inicio">
                <label for="data_fim">Data Fim:</label>
                <input type="date" name="data_fim" id="data_fim">
            </div>
            
            <label>Colunas a Exibir:</label><br>
            <input type="checkbox" name="colunas" value="nproduto" checked> Nome do Produto<br>
            <input type="checkbox" name="colunas" value="peso" checked> Peso<br>
            <input type="checkbox" name="colunas" value="datai" checked> Data Início<br>
            <input type="checkbox" name="colunas" value="horai" checked> Hora Início<br>
            <input type="checkbox" name="colunas" value="dataf"> Data Fim<br>
            <input type="checkbox" name="colunas" value="horaf"> Hora Fim<br>
            <input type="checkbox" name="colunas" value="marcha"> Marcha<br>
            <input type="checkbox" name="colunas" value="defprod"> Def. Produto<br>
            <input type="checkbox" name="colunas" value="motivo"> Motivo<br>
            <input type="checkbox" name="colunas" value="acaocorre"> Ação Correta<br>
            <input type="checkbox" name="colunas" value="respons"> Responsável<br>
            <input type="checkbox" name="colunas" value="obs"> Observações<br>

            <button type="submit">Pesquisar</button>
        </form>

        {% if dados %}
            <table>
                <thead>
                    <tr>
                        {% if 'nproduto' in dados[0] %}<th>Nome do Produto</th>{% endif %}
                        {% if 'peso' in dados[0] %}<th>Peso</th>{% endif %}
                        {% if 'datai' in dados[0] %}<th>Data Início</th>{% endif %}
                        {% if 'horai' in dados[0] %}<th>Hora Início</th>{% endif %}
                        {% if 'dataf' in dados[0] %}<th>Data Fim</th>{% endif %}
                        {% if 'horaf' in dados[0] %}<th>Hora Fim</th>{% endif %}
                        {% if 'marcha' in dados[0] %}<th>Marcha</th>{% endif %}
                        {% if 'defprod' in dados[0] %}<th>Def. Produto</th>{% endif %}
                        {% if 'motivo' in dados[0] %}<th>Motivo</th>{% endif %}
                        {% if 'acaocorre' in dados[0] %}<th>Ação Correta</th>{% endif %}
                        {% if 'respons' in dados[0] %}<th>Responsável</th>{% endif %}
                        {% if 'obs' in dados[0] %}<th>Observações</th>{% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for dado in dados %}
                    <tr>
                        {% if 'nproduto' in dado %}<td>{{ dado.nproduto }}</td>{% endif %}
                        {% if 'peso' in dado %}<td>{{ dado.peso }}</td>{% endif %}
                        {% if 'datai' in dado %}<td>{{ dado.datai }}</td>{% endif %}
                        {% if 'horai' in dado %}<td>{{ dado.horai }}</td>{% endif %}
                        {% if 'dataf' in dado %}<td>{{ dado.dataf }}</td>{% endif %}
                        {% if 'horaf' in dado %}<td>{{ dado.horaf }}</td>{% endif %}
                        {% if 'marcha' in dado %}<td>{{ dado.marcha }}</td>{% endif %}
                        {% if 'defprod' in dado %}<td>{{ dado.defprod }}</td>{% endif %}
                        {% if 'motivo' in dado %}<td>{{ dado.motivo }}</td>{% endif %}
                        {% if 'acaocorre' in dado %}<td>{{ dado.acaocorre }}</td>{% endif %}
                        {% if 'respons' in dado %}<td>{{ dado.respons }}</td>{% endif %}
                        {% if 'obs' in dado %}<td>{{ dado.obs }}</td>{% endif %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>Nenhum dado encontrado.</p>
        {% endif %}
    </div>

    <script>
        document.getElementById('filtro').addEventListener('change', function() {
            var selected = this.value;
            var intervalo = document.getElementById('intervalo');
            if (selected === 'intervalo') {
                intervalo.style.display = 'block';
            } else {
                intervalo.style.display = 'none';
            }
        });
    </script>
</body>
</html>
